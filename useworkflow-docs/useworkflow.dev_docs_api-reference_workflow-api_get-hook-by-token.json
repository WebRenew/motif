{
  "markdown": "[Vercel](https://vercel.com/) Slash [Workflow DevKit LogoWorkflow](https://useworkflow.dev/)\n\n- [Docs](https://useworkflow.dev/docs)\n- [Examples](https://github.com/vercel/workflow-examples)\n\n[X](https://x.com/workflowdevkit) [GitHub](https://github.com/vercel/workflow) Search... `⌘K`Ask AI\n\nAsk AI\n\nSearch... `⌘K`\n\n[Getting Started](https://useworkflow.dev/docs/getting-started)\n\n- [Next.js](https://useworkflow.dev/docs/getting-started/next)\n- [Vite](https://useworkflow.dev/docs/getting-started/vite)\n- [Astro](https://useworkflow.dev/docs/getting-started/astro)\n- [Express](https://useworkflow.dev/docs/getting-started/express)\n- [Fastify](https://useworkflow.dev/docs/getting-started/fastify)\n- [Hono](https://useworkflow.dev/docs/getting-started/hono)\n- [Nitro](https://useworkflow.dev/docs/getting-started/nitro)\n- [Nuxt](https://useworkflow.dev/docs/getting-started/nuxt)\n- [SvelteKit](https://useworkflow.dev/docs/getting-started/sveltekit)\n\n[Foundations](https://useworkflow.dev/docs/foundations)\n\n- [Workflows and Steps](https://useworkflow.dev/docs/foundations/workflows-and-steps)\n- [Starting Workflows](https://useworkflow.dev/docs/foundations/starting-workflows)\n- [Control Flow Patterns](https://useworkflow.dev/docs/foundations/control-flow-patterns)\n- [Errors & Retrying](https://useworkflow.dev/docs/foundations/errors-and-retries)\n- [Hooks & Webhooks](https://useworkflow.dev/docs/foundations/hooks)\n- [Streaming](https://useworkflow.dev/docs/foundations/streaming)\n- [Serialization](https://useworkflow.dev/docs/foundations/serialization)\n- [Idempotency](https://useworkflow.dev/docs/foundations/idempotency)\n\nHow it works\n\n[Observability](https://useworkflow.dev/docs/observability)\n\nAI Agents\n\n- [Building Durable AI Agents](https://useworkflow.dev/docs/ai)\n- [Streaming Updates from Tools](https://useworkflow.dev/docs/ai/streaming-updates-from-tools)\n- [Resumable Streams](https://useworkflow.dev/docs/ai/resumable-streams)\n- [Sleep, Suspense, and Scheduling](https://useworkflow.dev/docs/ai/sleep-and-delays)\n- [Human-in-the-Loop](https://useworkflow.dev/docs/ai/human-in-the-loop)\n- [Patterns for Defining Tools](https://useworkflow.dev/docs/ai/defining-tools)\n- [Chat Session Modeling](https://useworkflow.dev/docs/ai/chat-session-modeling)\n\n[Deploying](https://useworkflow.dev/docs/deploying)\n\n[Errors](https://useworkflow.dev/docs/errors)\n\n[API Reference](https://useworkflow.dev/docs/api-reference)\n\ngetHookByTokenAPI Signature\n\n[API Reference](https://useworkflow.dev/docs/api-reference) [workflow/api](https://useworkflow.dev/docs/api-reference/workflow-api)\n\n# getHookByToken\n\nRetrieves a hook by its unique token, returning the associated workflow run information and any metadata that was set when the hook was created. This function is useful for inspecting hook details before deciding whether to resume a workflow.\n\n`getHookByToken` is a runtime function that must be called from outside a workflow function.\n\n```\nimport { getHookByToken } from \"workflow/api\";\n\nexport async function POST(request: Request) {\n  const { token } = await request.json();\n  const hook = await getHookByToken(token);\n  console.log(\"Hook belongs to run:\", hook.runId);\n}\n```\n\n## [API Signature](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token\\#api-signature)\n\n### [Parameters](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token\\#parameters)\n\n| Name | Type | Description |\n| --- | --- | --- |\n| `token` | string | The unique token identifying the hook |\n\n### [Returns](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token\\#returns)\n\nReturns a `Promise<Hook>` that resolves to:\n\n| Name | Type | Description |\n| --- | --- | --- |\n| `runId` | string | The unique identifier of the workflow run this hook belongs to. |\n| `hookId` | string | The unique identifier of this hook within the workflow run. |\n| `token` | string | The secret token used to reference this hook. |\n| `ownerId` | string | The owner ID (team or user) that owns this hook. |\n| `projectId` | string | The project ID this hook belongs to. |\n| `environment` | string | The environment (e.g., \"production\", \"preview\", \"development\") where this hook was created. |\n| `createdAt` | Date | The timestamp when this hook was created. |\n| `metadata` | unknown | Optional metadata associated with the hook, set when the hook was created. |\n| `specVersion` | number | The spec version when this hook was created. |\n\n## [Examples](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token\\#examples)\n\n### [Basic Hook Lookup](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token\\#basic-hook-lookup)\n\nRetrieve hook information before resuming:\n\n```\nimport { getHookByToken, resumeHook } from \"workflow/api\";\n\nexport async function POST(request: Request) {\n  const { token, data } = await request.json();\n\n  try {\n    // First, get the hook to inspect its metadata\n    const hook = await getHookByToken(token);\n\n    console.log(\"Resuming workflow run:\", hook.runId);\n    console.log(\"Hook metadata:\", hook.metadata);\n\n    // Then resume the hook with the payload\n    await resumeHook(token, data);\n\n    return Response.json({\n      success: true,\n      runId: hook.runId\n    });\n  } catch (error) {\n    return new Response(\"Hook not found\", { status: 404 });\n  }\n}\n```\n\n### [Validating Hook Before Resume](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token\\#validating-hook-before-resume)\n\nUse `getHookByToken` to validate hook ownership or metadata before resuming:\n\n```\nimport { getHookByToken, resumeHook } from \"workflow/api\";\n\nexport async function POST(request: Request) {\n  const { token, userId, data } = await request.json();\n\n  try {\n    const hook = await getHookByToken(token);\n\n    // Validate that the hook metadata matches the user\n    if (hook.metadata?.allowedUserId !== userId) {\n      return Response.json(\n        { error: \"Unauthorized to resume this hook\" },\n        { status: 403 }\n      );\n    }\n\n    await resumeHook(token, data);\n    return Response.json({ success: true, runId: hook.runId });\n  } catch (error) {\n    return Response.json({ error: \"Hook not found\" }, { status: 404 });\n  }\n}\n```\n\n### [Checking Hook Environment](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token\\#checking-hook-environment)\n\nVerify the hook belongs to the expected environment:\n\n```\nimport { getHookByToken, resumeHook } from \"workflow/api\";\n\nexport async function POST(request: Request) {\n  const { token, data } = await request.json();\n  const expectedEnv = process.env.VERCEL_ENV || \"development\";\n\n  try {\n    const hook = await getHookByToken(token);\n\n    if (hook.environment !== expectedEnv) {\n      return Response.json(\n        { error: `Hook belongs to ${hook.environment} environment` },\n        { status: 400 }\n      );\n    }\n\n    await resumeHook(token, data);\n    return Response.json({ runId: hook.runId });\n  } catch (error) {\n    return Response.json({ error: \"Hook not found\" }, { status: 404 });\n  }\n}\n```\n\n### [Logging Hook Information](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token\\#logging-hook-information)\n\nLog hook details for debugging or auditing:\n\n```\nimport { getHookByToken, resumeHook } from \"workflow/api\";\n\nexport async function POST(request: Request) {\n  const url = new URL(request.url);\n  const token = url.searchParams.get(\"token\");\n\n  if (!token) {\n    return Response.json({ error: \"Missing token\" }, { status: 400 });\n  }\n\n  try {\n    const hook = await getHookByToken(token);\n\n    // Log for auditing\n    console.log({\n      action: \"hook_resume\",\n      runId: hook.runId,\n      hookId: hook.hookId,\n      projectId: hook.projectId,\n      createdAt: hook.createdAt,\n    });\n\n    const body = await request.json();\n    await resumeHook(token, body);\n\n    return Response.json({ success: true });\n  } catch (error) {\n    return Response.json({ error: \"Hook not found\" }, { status: 404 });\n  }\n}\n```\n\n## [Related Functions](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token\\#related-functions)\n\n- [`resumeHook()`](https://useworkflow.dev/docs/api-reference/workflow-api/resume-hook) \\- Resume a hook with a payload.\n- [`createHook()`](https://useworkflow.dev/docs/api-reference/workflow/create-hook) \\- Create a hook in a workflow.\n- [`defineHook()`](https://useworkflow.dev/docs/api-reference/workflow/define-hook) \\- Type-safe hook helper.\n\n[workflow/api\\\\\n\\\\\nPrevious Page](https://useworkflow.dev/docs/api-reference/workflow-api) [getRun\\\\\n\\\\\nNext Page](https://useworkflow.dev/docs/api-reference/workflow-api/get-run)\n\nOn this page\n\n[API Signature](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token#api-signature) [Parameters](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token#parameters) [Returns](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token#returns) [Examples](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token#examples) [Basic Hook Lookup](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token#basic-hook-lookup) [Validating Hook Before Resume](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token#validating-hook-before-resume) [Checking Hook Environment](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token#checking-hook-environment) [Logging Hook Information](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token#logging-hook-information) [Related Functions](https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token#related-functions)\n\n[GitHubEdit this page on GitHub](https://github.com/vercel/workflow/edit/main/content/docs/api-reference/workflow-api/get-hook-by-token.mdx) Scroll to topGive feedbackCopy pageAsk AI about this pageOpen in chat\n\n## Chat\n\nWhat is Workflow?How does retrying work?What control flow patterns are there?How do directives work?How do I build an AI agent?\n\nTip: You can open and close chat with `⌘I`\n\n0 / 1000",
  "metadata": {
    "twitter:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "twitter:card": "summary_large_image",
    "og:image:width": "1200",
    "next-size-adjust": "",
    "og:title": "getHookByToken",
    "og:image:type": "image/png",
    "title": "getHookByToken",
    "language": "en",
    "twitter:image:height": "628",
    "twitter:image:width": "1200",
    "viewport": "width=device-width, initial-scale=1",
    "twitter:image:type": "image/png",
    "ogImage": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "og:image:height": "628",
    "twitter:title": "getHookByToken",
    "ogTitle": "getHookByToken",
    "og:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "favicon": "https://useworkflow.dev/favicon.ico?favicon.e7ce0d1c.ico",
    "scrapeId": "019bf2d4-569c-75d7-940f-914bb357a2ac",
    "sourceURL": "https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token",
    "url": "https://useworkflow.dev/docs/api-reference/workflow-api/get-hook-by-token",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "hit",
    "cachedAt": "2026-01-24T22:01:38.452Z",
    "creditsUsed": 1
  }
}