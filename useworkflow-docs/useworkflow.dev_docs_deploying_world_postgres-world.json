{
  "markdown": "[Vercel](https://vercel.com/) Slash [Workflow DevKit LogoWorkflow](https://useworkflow.dev/)\n\n- [Docs](https://useworkflow.dev/docs)\n- [Examples](https://github.com/vercel/workflow-examples)\n\n[X](https://x.com/workflowdevkit) [GitHub](https://github.com/vercel/workflow) Search... `‚åòK`Ask AI\n\nAsk AI\n\nSearch... `‚åòK`\n\n[Getting Started](https://useworkflow.dev/docs/getting-started)\n\n- [Next.js](https://useworkflow.dev/docs/getting-started/next)\n- [Vite](https://useworkflow.dev/docs/getting-started/vite)\n- [Astro](https://useworkflow.dev/docs/getting-started/astro)\n- [Express](https://useworkflow.dev/docs/getting-started/express)\n- [Fastify](https://useworkflow.dev/docs/getting-started/fastify)\n- [Hono](https://useworkflow.dev/docs/getting-started/hono)\n- [Nitro](https://useworkflow.dev/docs/getting-started/nitro)\n- [Nuxt](https://useworkflow.dev/docs/getting-started/nuxt)\n- [SvelteKit](https://useworkflow.dev/docs/getting-started/sveltekit)\n\n[Foundations](https://useworkflow.dev/docs/foundations)\n\n- [Workflows and Steps](https://useworkflow.dev/docs/foundations/workflows-and-steps)\n- [Starting Workflows](https://useworkflow.dev/docs/foundations/starting-workflows)\n- [Control Flow Patterns](https://useworkflow.dev/docs/foundations/control-flow-patterns)\n- [Errors & Retrying](https://useworkflow.dev/docs/foundations/errors-and-retries)\n- [Hooks & Webhooks](https://useworkflow.dev/docs/foundations/hooks)\n- [Streaming](https://useworkflow.dev/docs/foundations/streaming)\n- [Serialization](https://useworkflow.dev/docs/foundations/serialization)\n- [Idempotency](https://useworkflow.dev/docs/foundations/idempotency)\n\nHow it works\n\n[Observability](https://useworkflow.dev/docs/observability)\n\nAI Agents\n\n- [Building Durable AI Agents](https://useworkflow.dev/docs/ai)\n- [Streaming Updates from Tools](https://useworkflow.dev/docs/ai/streaming-updates-from-tools)\n- [Resumable Streams](https://useworkflow.dev/docs/ai/resumable-streams)\n- [Sleep, Suspense, and Scheduling](https://useworkflow.dev/docs/ai/sleep-and-delays)\n- [Human-in-the-Loop](https://useworkflow.dev/docs/ai/human-in-the-loop)\n- [Patterns for Defining Tools](https://useworkflow.dev/docs/ai/defining-tools)\n- [Chat Session Modeling](https://useworkflow.dev/docs/ai/chat-session-modeling)\n\n[Deploying](https://useworkflow.dev/docs/deploying)\n\n[Errors](https://useworkflow.dev/docs/errors)\n\n[API Reference](https://useworkflow.dev/docs/api-reference)\n\nPostgres WorldInstallation\n\n[Deploying](https://useworkflow.dev/docs/deploying) [World](https://useworkflow.dev/docs/deploying/world)\n\n# Postgres World\n\nThe PostgreSQL world is a reference implementation of a [World](https://useworkflow.dev/docs/deploying/world) that's fully backed by PostgreSQL, including job processing (using [pg-boss](https://github.com/timgit/pg-boss)) and streaming (using PostgreSQL's NOTIFY and LISTEN).\n\nThis world is designed for long-running processes, so it can receive and dispatch events from a PostgreSQL database, and isn't meant to be deployed on serverless platforms like Vercel due to that nature.\n\n## [Installation](https://useworkflow.dev/docs/deploying/world/postgres-world\\#installation)\n\nInstall the `@workflow/world-postgres` package:\n\nnpm\n\npnpm\n\nyarn\n\nbun\n\n```\nnpm install @workflow/world-postgres\n```\n\n## [Add Environment Variables](https://useworkflow.dev/docs/deploying/world/postgres-world\\#add-environment-variables)\n\nAdd the following environment variables to your `.env` file required for workflows:\n\n```\nWORKFLOW_TARGET_WORLD=\"@workflow/world-postgres\"\nWORKFLOW_POSTGRES_URL=\"postgres://postgres:password@db.yourdb.co:5432/postgres\"\nWORKFLOW_POSTGRES_JOB_PREFIX=\"workflow_\"\nWORKFLOW_POSTGRES_WORKER_CONCURRENCY=10\n```\n\nThe world configuration is automatically read from environment variables:\n\n- `WORKFLOW_TARGET_WORLD` \\- Required, specifies which world implementation to use\n- `WORKFLOW_POSTGRES_URL` \\- PostgreSQL connection string (defaults to `postgres://world:world@localhost:5432/world`)\n- `WORKFLOW_POSTGRES_JOB_PREFIX` \\- Prefix for queue job names\n- `WORKFLOW_POSTGRES_WORKER_CONCURRENCY` \\- Number of concurrent workers (defaults to `10` if not specified)\n\n## [Set Up the Database Schema](https://useworkflow.dev/docs/deploying/world/postgres-world\\#set-up-the-database-schema)\n\nRun the setup script to create the required database tables:\n\n```\npnpm exec workflow-postgres-setup\n```\n\nThis will create the following tables in your PostgreSQL database:\n\n- `workflow_runs` \\- Stores workflow execution state\n- `workflow_events` \\- Stores workflow events\n- `workflow_steps` \\- Stores workflow step state\n- `workflow_hooks` \\- Stores workflow hooks\n- `workflow_stream_chunks` \\- Stores streaming data\n\nYou should see output like:\n\n```\nüîß Setting up database schema...\nüìç Connection: postgres://postgres:****@db.yourcloudprovider.co:5432/postgres\n‚úÖ Database schema created successfully!\n```\n\n## [Initialize the PostgreSQL World](https://useworkflow.dev/docs/deploying/world/postgres-world\\#initialize-the-postgresql-world)\n\nStarting the PostgreSQL World will vary between different frameworks. The main idea is starting the PostgreSQL World on server startup.\n\nHere are some examples of what it might look like:\n\n### [Next.js](https://useworkflow.dev/docs/deploying/world/postgres-world\\#nextjs)\n\nCreate an `instrumentation.ts` file in your project root to initialize and start the world:\n\ninstrumentation.ts\n\n```\n\n```\n\nLearn more about [Next.js Instrumentation](https://nextjs.org/docs/app/guides/instrumentation).\n\n### [SvelteKit](https://useworkflow.dev/docs/deploying/world/postgres-world\\#sveltekit)\n\nCreate a file `src/hooks.server.ts`:\n\nsrc/hooks.server.ts\n\n```\n\n```\n\nLearn more about [SvelteKit Hooks](https://svelte.dev/docs/kit/hooks).\n\n### [Nitro-based Apps](https://useworkflow.dev/docs/deploying/world/postgres-world\\#nitro-based-apps)\n\nCreate a plugin to start the PostgreSQL World. This will be invoked when the Nitro server starts.\n\nplugins/start-pg-world.ts\n\n```\n\n```\n\nAdd the plugin to your `nitro.config.ts` file. This enables the plugin:\n\nnitro.config.ts\n\n```\n\n```\n\nLearn more about [Nitro Plugins](https://v3.nitro.build/docs/plugins)\n\n## [How it works](https://useworkflow.dev/docs/deploying/world/postgres-world\\#how-it-works)\n\nThe Postgres World uses PostgreSQL as a durable backend for workflow execution:\n\n- **Job Queue**: Uses [pg-boss](https://github.com/timgit/pg-boss) for reliable job processing\n- **Event Streaming**: Leverages PostgreSQL's NOTIFY/LISTEN for real-time event distribution\n- **State Persistence**: All workflow state is stored in PostgreSQL tables\n- **Worker Management**: Supports configurable concurrent workers for job processing\n\nThis setup ensures that your workflows can survive application restarts and failures, with all state reliably persisted to your PostgreSQL database.\n\n[Vercel World\\\\\n\\\\\nPrevious Page](https://useworkflow.dev/docs/deploying/world/vercel-world) [Errors\\\\\n\\\\\nNext Page](https://useworkflow.dev/docs/errors)\n\nOn this page\n\n[Installation](https://useworkflow.dev/docs/deploying/world/postgres-world#installation) [Add Environment Variables](https://useworkflow.dev/docs/deploying/world/postgres-world#add-environment-variables) [Set Up the Database Schema](https://useworkflow.dev/docs/deploying/world/postgres-world#set-up-the-database-schema) [Initialize the PostgreSQL World](https://useworkflow.dev/docs/deploying/world/postgres-world#initialize-the-postgresql-world) [Next.js](https://useworkflow.dev/docs/deploying/world/postgres-world#nextjs) [SvelteKit](https://useworkflow.dev/docs/deploying/world/postgres-world#sveltekit) [Nitro-based Apps](https://useworkflow.dev/docs/deploying/world/postgres-world#nitro-based-apps) [How it works](https://useworkflow.dev/docs/deploying/world/postgres-world#how-it-works)\n\n[GitHubEdit this page on GitHub](https://github.com/vercel/workflow/edit/main/content/docs/deploying/world/postgres-world.mdx) Scroll to topGive feedbackCopy pageAsk AI about this pageOpen in chat\n\n## Chat\n\nWhat is Workflow?How does retrying work?What control flow patterns are there?How do directives work?How do I build an AI agent?\n\nTip: You can open and close chat with `‚åòI`\n\n0 / 1000",
  "metadata": {
    "ogTitle": "Postgres World",
    "og:image:type": "image/png",
    "twitter:card": "summary_large_image",
    "language": "en",
    "og:image:width": "1200",
    "ogImage": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "viewport": "width=device-width, initial-scale=1",
    "og:image:height": "628",
    "title": "Postgres World",
    "twitter:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "next-size-adjust": "",
    "og:title": "Postgres World",
    "og:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "twitter:image:width": "1200",
    "twitter:title": "Postgres World",
    "twitter:image:height": "628",
    "twitter:image:type": "image/png",
    "favicon": "https://useworkflow.dev/favicon.ico?favicon.e7ce0d1c.ico",
    "scrapeId": "019bf2d4-569c-75d7-940f-69beff728634",
    "sourceURL": "https://useworkflow.dev/docs/deploying/world/postgres-world",
    "url": "https://useworkflow.dev/docs/deploying/world/postgres-world",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "hit",
    "cachedAt": "2026-01-24T22:00:57.675Z",
    "creditsUsed": 1
  }
}