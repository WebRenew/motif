{
  "markdown": "[Vercel](https://vercel.com/) Slash [Workflow DevKit LogoWorkflow](https://useworkflow.dev/)\n\n- [Docs](https://useworkflow.dev/docs)\n- [Examples](https://github.com/vercel/workflow-examples)\n\n[X](https://x.com/workflowdevkit) [GitHub](https://github.com/vercel/workflow) Search... `⌘K`Ask AI\n\nAsk AI\n\nSearch... `⌘K`\n\n[Getting Started](https://useworkflow.dev/docs/getting-started)\n\n- [Next.js](https://useworkflow.dev/docs/getting-started/next)\n- [Vite](https://useworkflow.dev/docs/getting-started/vite)\n- [Astro](https://useworkflow.dev/docs/getting-started/astro)\n- [Express](https://useworkflow.dev/docs/getting-started/express)\n- [Fastify](https://useworkflow.dev/docs/getting-started/fastify)\n- [Hono](https://useworkflow.dev/docs/getting-started/hono)\n- [Nitro](https://useworkflow.dev/docs/getting-started/nitro)\n- [Nuxt](https://useworkflow.dev/docs/getting-started/nuxt)\n- [SvelteKit](https://useworkflow.dev/docs/getting-started/sveltekit)\n\n[Foundations](https://useworkflow.dev/docs/foundations)\n\n- [Workflows and Steps](https://useworkflow.dev/docs/foundations/workflows-and-steps)\n- [Starting Workflows](https://useworkflow.dev/docs/foundations/starting-workflows)\n- [Control Flow Patterns](https://useworkflow.dev/docs/foundations/control-flow-patterns)\n- [Errors & Retrying](https://useworkflow.dev/docs/foundations/errors-and-retries)\n- [Hooks & Webhooks](https://useworkflow.dev/docs/foundations/hooks)\n- [Streaming](https://useworkflow.dev/docs/foundations/streaming)\n- [Serialization](https://useworkflow.dev/docs/foundations/serialization)\n- [Idempotency](https://useworkflow.dev/docs/foundations/idempotency)\n\nHow it works\n\n[Observability](https://useworkflow.dev/docs/observability)\n\nAI Agents\n\n- [Building Durable AI Agents](https://useworkflow.dev/docs/ai)\n- [Streaming Updates from Tools](https://useworkflow.dev/docs/ai/streaming-updates-from-tools)\n- [Resumable Streams](https://useworkflow.dev/docs/ai/resumable-streams)\n- [Sleep, Suspense, and Scheduling](https://useworkflow.dev/docs/ai/sleep-and-delays)\n- [Human-in-the-Loop](https://useworkflow.dev/docs/ai/human-in-the-loop)\n- [Patterns for Defining Tools](https://useworkflow.dev/docs/ai/defining-tools)\n- [Chat Session Modeling](https://useworkflow.dev/docs/ai/chat-session-modeling)\n\n[Deploying](https://useworkflow.dev/docs/deploying)\n\n[Errors](https://useworkflow.dev/docs/errors)\n\n[API Reference](https://useworkflow.dev/docs/api-reference)\n\nfetchAPI Signature\n\n[API Reference](https://useworkflow.dev/docs/api-reference) [workflow](https://useworkflow.dev/docs/api-reference/workflow)\n\n# fetch\n\nMakes HTTP requests from within a workflow. This is a special step function that wraps the standard `fetch` API, automatically handling serialization and providing retry semantics.\n\nThis is useful when you need to call external APIs or services from within your workflow.\n\n`fetch` is a _special_ type of step function provided and should be called directly inside workflow functions.\n\n```\nimport { fetch } from \"workflow\"\n\nasync function apiWorkflow() {\n    \"use workflow\"\n\n    // Fetch data from an API\n    const response = await fetch(\"https://api.example.com/data\")\n    return await response.json()\n}\n```\n\n## [API Signature](https://useworkflow.dev/docs/api-reference/workflow/fetch\\#api-signature)\n\n### [Parameters](https://useworkflow.dev/docs/api-reference/workflow/fetch\\#parameters)\n\nAccepts the same arguments as web [`fetch`](https://developer.mozilla.org/en-US/docs/Web/API/Window/fetch)\n\n| Name | Type | Description |\n| --- | --- | --- |\n| `args` | \\[input: string \\| URL \\| Request, init?: RequestInit \\| undefined\\] |  |\n\n### [Returns](https://useworkflow.dev/docs/api-reference/workflow/fetch\\#returns)\n\nReturns the same response as web [`fetch`](https://developer.mozilla.org/en-US/docs/Web/API/Window/fetch)\n\n`Promise<Response>`\n\n## [Examples](https://useworkflow.dev/docs/api-reference/workflow/fetch\\#examples)\n\n### [Basic Usage](https://useworkflow.dev/docs/api-reference/workflow/fetch\\#basic-usage)\n\nHere's a simple example of how you can use `fetch` inside your workflow.\n\n```\nimport { fetch } from \"workflow\"\n\nasync function apiWorkflow() {\n    \"use workflow\"\n\n    // Fetch data from an API\n    const response = await fetch(\"https://api.example.com/data\")\n    const data = await response.json()\n\n    // Make a POST request\n    const postResponse = await fetch(\"https://api.example.com/create\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({ name: \"test\" })\n    })\n\n    return data\n}\n```\n\nWe call `fetch()` with a URL and optional request options, just like the standard fetch API. The workflow runtime automatically handles the response serialization.\n\nThis API is provided as a convenience to easily use `fetch` in workflow, but often, you might want to extend and implement your own fetch for more powerful error handing and retry logic.\n\n### [Customizing Fetch Behavior](https://useworkflow.dev/docs/api-reference/workflow/fetch\\#customizing-fetch-behavior)\n\nHere's an example of a custom fetch wrapper that provides more sophisticated error handling with custom retry logic:\n\n```\nimport { FatalError, RetryableError } from \"workflow\"\n\nexport async function customFetch(\n    url: string,\n    init?: RequestInit\n) {\n    \"use step\"\n\n    const response = await fetch(url, init)\n\n    // Handle client errors (4xx) - don't retry\n    if (response.status >= 400 && response.status < 500) {\n        if (response.status === 429) {\n            // Rate limited - retry with backoff from Retry-After header\n            const retryAfter = response.headers.get(\"Retry-After\")\n\n            if (retryAfter) {\n                // The Retry-After header is either a number (seconds) or an RFC 7231 date string\n                const retryAfterValue = /^\\d+$/.test(retryAfter)\n                    ? parseInt(retryAfter) * 1000  // Convert seconds to milliseconds\n                    : new Date(retryAfter);        // Parse RFC 7231 date format\n\n                // Use `RetryableError` to customize the retry\n                throw new RetryableError(\n                    `Rate limited by ${url}`,\n                    { retryAfter: retryAfterValue }\n                )\n            }\n        }\n\n        // Other client errors are fatal (400, 401, 403, 404, etc.)\n        throw new FatalError(\n            `Client error ${response.status}: ${response.statusText}`\n        )\n    }\n\n    // Handle server errors (5xx) - will retry automatically\n    if (!response.ok) {\n        throw new Error(\n            `Server error ${response.status}: ${response.statusText}`\n        )\n    }\n\n    return response\n}\n```\n\nThis example demonstrates:\n\n- Setting custom `maxRetries` to 5 retries (6 total attempts including the initial attempt).\n- Throwing [`FatalError`](https://useworkflow.dev/docs/api-reference/workflow/fatal-error) for client errors (400-499) to prevent retries.\n- Handling 429 rate limiting by reading the `Retry-After` header and using [`RetryableError`](https://useworkflow.dev/docs/api-reference/workflow/retryable-error).\n- Allowing automatic retries for server errors (5xx).\n\n[defineHook\\\\\n\\\\\nPrevious Page](https://useworkflow.dev/docs/api-reference/workflow/define-hook) [getStepMetadata\\\\\n\\\\\nNext Page](https://useworkflow.dev/docs/api-reference/workflow/get-step-metadata)\n\nOn this page\n\n[API Signature](https://useworkflow.dev/docs/api-reference/workflow/fetch#api-signature) [Parameters](https://useworkflow.dev/docs/api-reference/workflow/fetch#parameters) [Returns](https://useworkflow.dev/docs/api-reference/workflow/fetch#returns) [Examples](https://useworkflow.dev/docs/api-reference/workflow/fetch#examples) [Basic Usage](https://useworkflow.dev/docs/api-reference/workflow/fetch#basic-usage) [Customizing Fetch Behavior](https://useworkflow.dev/docs/api-reference/workflow/fetch#customizing-fetch-behavior)\n\n[GitHubEdit this page on GitHub](https://github.com/vercel/workflow/edit/main/content/docs/api-reference/workflow/fetch.mdx) Scroll to topGive feedbackCopy pageAsk AI about this pageOpen in chat\n\n## Chat\n\nWhat is Workflow?How does retrying work?What control flow patterns are there?How do directives work?How do I build an AI agent?\n\nTip: You can open and close chat with `⌘I`\n\n0 / 1000",
  "metadata": {
    "og:title": "fetch",
    "og:image:width": "1200",
    "twitter:card": "summary_large_image",
    "viewport": "width=device-width, initial-scale=1",
    "twitter:title": "fetch",
    "og:image:height": "628",
    "og:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "twitter:image:type": "image/png",
    "ogImage": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "language": "en",
    "title": "fetch",
    "og:image:type": "image/png",
    "ogTitle": "fetch",
    "twitter:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "twitter:image:width": "1200",
    "twitter:image:height": "628",
    "next-size-adjust": "",
    "favicon": "https://useworkflow.dev/favicon.ico?favicon.e7ce0d1c.ico",
    "scrapeId": "019bf2d4-569c-75d7-940f-e3d58e5fc01d",
    "sourceURL": "https://useworkflow.dev/docs/api-reference/workflow/fetch",
    "url": "https://useworkflow.dev/docs/api-reference/workflow/fetch",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "hit",
    "cachedAt": "2026-01-24T22:01:01.496Z",
    "creditsUsed": 1
  }
}