{
  "markdown": "[Vercel](https://vercel.com/) Slash [Workflow DevKit LogoWorkflow](https://useworkflow.dev/)\n\n- [Docs](https://useworkflow.dev/docs)\n- [Examples](https://github.com/vercel/workflow-examples)\n\n[X](https://x.com/workflowdevkit) [GitHub](https://github.com/vercel/workflow) Search... `⌘K`Ask AI\n\nAsk AI\n\nSearch... `⌘K`\n\n[Getting Started](https://useworkflow.dev/docs/getting-started)\n\n- [Next.js](https://useworkflow.dev/docs/getting-started/next)\n- [Vite](https://useworkflow.dev/docs/getting-started/vite)\n- [Astro](https://useworkflow.dev/docs/getting-started/astro)\n- [Express](https://useworkflow.dev/docs/getting-started/express)\n- [Fastify](https://useworkflow.dev/docs/getting-started/fastify)\n- [Hono](https://useworkflow.dev/docs/getting-started/hono)\n- [Nitro](https://useworkflow.dev/docs/getting-started/nitro)\n- [Nuxt](https://useworkflow.dev/docs/getting-started/nuxt)\n- [SvelteKit](https://useworkflow.dev/docs/getting-started/sveltekit)\n\n[Foundations](https://useworkflow.dev/docs/foundations)\n\n- [Workflows and Steps](https://useworkflow.dev/docs/foundations/workflows-and-steps)\n- [Starting Workflows](https://useworkflow.dev/docs/foundations/starting-workflows)\n- [Control Flow Patterns](https://useworkflow.dev/docs/foundations/control-flow-patterns)\n- [Errors & Retrying](https://useworkflow.dev/docs/foundations/errors-and-retries)\n- [Hooks & Webhooks](https://useworkflow.dev/docs/foundations/hooks)\n- [Streaming](https://useworkflow.dev/docs/foundations/streaming)\n- [Serialization](https://useworkflow.dev/docs/foundations/serialization)\n- [Idempotency](https://useworkflow.dev/docs/foundations/idempotency)\n\nHow it works\n\n[Observability](https://useworkflow.dev/docs/observability)\n\nAI Agents\n\n- [Building Durable AI Agents](https://useworkflow.dev/docs/ai)\n- [Streaming Updates from Tools](https://useworkflow.dev/docs/ai/streaming-updates-from-tools)\n- [Resumable Streams](https://useworkflow.dev/docs/ai/resumable-streams)\n- [Sleep, Suspense, and Scheduling](https://useworkflow.dev/docs/ai/sleep-and-delays)\n- [Human-in-the-Loop](https://useworkflow.dev/docs/ai/human-in-the-loop)\n- [Patterns for Defining Tools](https://useworkflow.dev/docs/ai/defining-tools)\n- [Chat Session Modeling](https://useworkflow.dev/docs/ai/chat-session-modeling)\n\n[Deploying](https://useworkflow.dev/docs/deploying)\n\n[Errors](https://useworkflow.dev/docs/errors)\n\n[API Reference](https://useworkflow.dev/docs/api-reference)\n\ncreateWebhookAPI Signature\n\n[API Reference](https://useworkflow.dev/docs/api-reference) [workflow](https://useworkflow.dev/docs/api-reference/workflow)\n\n# createWebhook\n\nCreates a webhook that can be used to suspend and resume a workflow run upon receiving an HTTP request.\n\nWebhooks provide a way for external systems to send HTTP requests directly to your workflow. Unlike hooks which accept arbitrary payloads, webhooks work with standard HTTP `Request` objects and can return HTTP `Response` objects.\n\n```\nimport { createWebhook } from \"workflow\"\n\nexport async function webhookWorkflow() {\n  \"use workflow\";\n  const webhook = createWebhook();\n  console.log(\"Webhook URL:\", webhook.url);\n\n  const request = await webhook; // Suspends until HTTP request received\n  console.log(\"Received request:\", request.method, request.url);\n}\n```\n\n## [API Signature](https://useworkflow.dev/docs/api-reference/workflow/create-webhook\\#api-signature)\n\n### [Parameters](https://useworkflow.dev/docs/api-reference/workflow/create-webhook\\#parameters)\n\nThis function has multiple signatures.\n\n#### Signature 1\n\n| Name | Type | Description |\n| --- | --- | --- |\n| `options` | WebhookOptions & { respondWith: \"manual\"; } |  |\n\n#### Signature 2\n\n| Name | Type | Description |\n| --- | --- | --- |\n| `options` | WebhookOptions |  |\n\n### [Returns](https://useworkflow.dev/docs/api-reference/workflow/create-webhook\\#returns)\n\nThis function has multiple signatures.\n\n#### Signature 1\n\n`Webhook<RequestWithResponse>`\n\n#### Signature 2\n\n`Webhook<Request>`\n\nThe returned `Webhook` object has:\n\n- `url`: The HTTP endpoint URL that external systems can call\n- `token`: The unique token identifying this webhook\n- Implements `AsyncIterable<RequestWithResponse>` for handling multiple requests\n\nThe `RequestWithResponse` type extends the standard `Request` interface with a `respondWith(response: Response)` method for sending custom responses back to the caller.\n\n## [Examples](https://useworkflow.dev/docs/api-reference/workflow/create-webhook\\#examples)\n\n### [Basic Usage](https://useworkflow.dev/docs/api-reference/workflow/create-webhook\\#basic-usage)\n\nCreate a webhook that receives HTTP requests and logs the request details:\n\n```\nimport { createWebhook } from \"workflow\"\n\nexport async function basicWebhookWorkflow() {\n  \"use workflow\";\n\n  const webhook = createWebhook();\n  console.log(\"Send requests to:\", webhook.url);\n\n  const request = await webhook;\n\n  console.log(\"Method:\", request.method);\n  console.log(\"Headers:\", Object.fromEntries(request.headers));\n\n  const body = await request.text();\n  console.log(\"Body:\", body);\n}\n```\n\n### [Responding to Webhook Requests](https://useworkflow.dev/docs/api-reference/workflow/create-webhook\\#responding-to-webhook-requests)\n\nUse the `respondWith()` method to send custom HTTP responses. Note that `respondWith()` must be called from within a step function:\n\n```\nimport { createWebhook, type RequestWithResponse } from \"workflow\"\n\nasync function sendResponse(request: RequestWithResponse) {\n  \"use step\";\n  await request.respondWith(\n    new Response(JSON.stringify({ success: true, message: \"Received!\" }), {\n      status: 200,\n      headers: { \"Content-Type\": \"application/json\" }\n    })\n  );\n}\n\nexport async function respondingWebhookWorkflow() {\n  \"use workflow\";\n\n  const webhook = createWebhook();\n  console.log(\"Webhook URL:\", webhook.url);\n\n  const request = await webhook;\n\n  // Send a custom response back to the caller\n  await sendResponse(request);\n\n  // Continue workflow processing\n  const data = await request.json();\n  await processData(data);\n}\n\nasync function processData(data: any) {\n  \"use step\";\n  // Process the webhook data\n  console.log(\"Processing:\", data);\n}\n```\n\n### [Customizing Tokens](https://useworkflow.dev/docs/api-reference/workflow/create-webhook\\#customizing-tokens)\n\nTokens are used to identify a specific webhook. You can customize the token to be more specific to a use case.\n\n```\nimport { type RequestWithResponse } from \"workflow\"\n\nasync function sendAck(request: RequestWithResponse) {\n  \"use step\";\n  await request.respondWith(\n    new Response(JSON.stringify({ received: true }), {\n      headers: { \"Content-Type\": \"application/json\" }\n    })\n  );\n}\n\nexport async function githubWebhookWorkflow(repoName: string) {\n  \"use workflow\";\n\n  // Use a deterministic token based on the repository\n  const webhook = createWebhook({\n    token: `github_webhook:${repoName}`,\n  });\n\n  console.log(\"Configure GitHub webhook:\", webhook.url);\n\n  const request = await webhook;\n  const event = await request.json();\n\n  await sendAck(request);\n\n  await deployCommit(event);\n}\n\nasync function deployCommit(event: any) {\n  \"use step\";\n  // Deploy logic here\n}\n```\n\n### [Waiting for Multiple Requests](https://useworkflow.dev/docs/api-reference/workflow/create-webhook\\#waiting-for-multiple-requests)\n\nYou can also wait for multiple requests by using the `for await...of` syntax.\n\n```\nimport { createWebhook, type RequestWithResponse } from \"workflow\"\n\nasync function sendSlackResponse(request: RequestWithResponse, message: string) {\n  \"use step\";\n  await request.respondWith(\n    new Response(\n      JSON.stringify({\n        response_type: \"in_channel\",\n        text: message\n      }),\n      { headers: { \"Content-Type\": \"application/json\" } }\n    )\n  );\n}\n\nasync function sendStopResponse(request: RequestWithResponse) {\n  \"use step\";\n  await request.respondWith(\n    new Response(\"Stopping workflow...\")\n  );\n}\n\nexport async function slackCommandWorkflow(channelId: string) {\n  \"use workflow\";\n\n  const webhook = createWebhook({\n    token: `slack_command:${channelId}`,\n  });\n\n  for await (const request of webhook) {\n    const formData = await request.formData();\n    const command = formData.get(\"command\");\n    const text = formData.get(\"text\");\n\n    if (command === \"/status\") {\n      // Respond immediately to Slack\n      await sendSlackResponse(request, \"Checking status...\");\n\n      // Process the command\n      const status = await checkSystemStatus();\n      await postToSlack(channelId, `Status: ${status}`);\n    }\n\n    if (text === \"stop\") {\n      await sendStopResponse(request);\n      break;\n    }\n  }\n}\n\nasync function checkSystemStatus() {\n  \"use step\";\n  return \"All systems operational\";\n}\n\nasync function postToSlack(channelId: string, message: string) {\n  \"use step\";\n  // Post message to Slack\n}\n```\n\n## [Related Functions](https://useworkflow.dev/docs/api-reference/workflow/create-webhook\\#related-functions)\n\n- [`createHook()`](https://useworkflow.dev/docs/api-reference/workflow/create-hook) \\- Lower-level hook primitive for arbitrary payloads\n- [`defineHook()`](https://useworkflow.dev/docs/api-reference/workflow/define-hook) \\- Type-safe hook helper\n- [`resumeWebhook()`](https://useworkflow.dev/docs/api-reference/workflow-api/resume-webhook) \\- Resume a webhook from an API route\n\n[createHook\\\\\n\\\\\nPrevious Page](https://useworkflow.dev/docs/api-reference/workflow/create-hook) [defineHook\\\\\n\\\\\nNext Page](https://useworkflow.dev/docs/api-reference/workflow/define-hook)\n\nOn this page\n\n[API Signature](https://useworkflow.dev/docs/api-reference/workflow/create-webhook#api-signature) [Parameters](https://useworkflow.dev/docs/api-reference/workflow/create-webhook#parameters) [Returns](https://useworkflow.dev/docs/api-reference/workflow/create-webhook#returns) [Examples](https://useworkflow.dev/docs/api-reference/workflow/create-webhook#examples) [Basic Usage](https://useworkflow.dev/docs/api-reference/workflow/create-webhook#basic-usage) [Responding to Webhook Requests](https://useworkflow.dev/docs/api-reference/workflow/create-webhook#responding-to-webhook-requests) [Customizing Tokens](https://useworkflow.dev/docs/api-reference/workflow/create-webhook#customizing-tokens) [Waiting for Multiple Requests](https://useworkflow.dev/docs/api-reference/workflow/create-webhook#waiting-for-multiple-requests) [Related Functions](https://useworkflow.dev/docs/api-reference/workflow/create-webhook#related-functions)\n\n[GitHubEdit this page on GitHub](https://github.com/vercel/workflow/edit/main/content/docs/api-reference/workflow/create-webhook.mdx) Scroll to topGive feedbackCopy pageAsk AI about this pageOpen in chat\n\n## Chat\n\nWhat is Workflow?How does retrying work?What control flow patterns are there?How do directives work?How do I build an AI agent?\n\nTip: You can open and close chat with `⌘I`\n\n0 / 1000",
  "metadata": {
    "language": "en",
    "og:image:width": "1200",
    "viewport": "width=device-width, initial-scale=1",
    "ogImage": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "og:image:height": "628",
    "twitter:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "og:image:type": "image/png",
    "og:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "twitter:image:width": "1200",
    "twitter:image:height": "628",
    "twitter:card": "summary_large_image",
    "twitter:image:type": "image/png",
    "ogTitle": "createWebhook",
    "next-size-adjust": "",
    "title": "createWebhook",
    "og:title": "createWebhook",
    "twitter:title": "createWebhook",
    "favicon": "https://useworkflow.dev/favicon.ico?favicon.e7ce0d1c.ico",
    "scrapeId": "019bf2d4-569c-75d7-940f-486a3537c68f",
    "sourceURL": "https://useworkflow.dev/docs/api-reference/workflow/create-webhook",
    "url": "https://useworkflow.dev/docs/api-reference/workflow/create-webhook",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "hit",
    "cachedAt": "2026-01-24T22:00:39.479Z",
    "creditsUsed": 1
  }
}