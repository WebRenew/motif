{
  "markdown": "[Vercel](https://vercel.com/) Slash [Workflow DevKit LogoWorkflow](https://useworkflow.dev/)\n\n- [Docs](https://useworkflow.dev/docs)\n- [Examples](https://github.com/vercel/workflow-examples)\n\n[X](https://x.com/workflowdevkit) [GitHub](https://github.com/vercel/workflow) Search... `⌘K`Ask AI\n\nAsk AI\n\nSearch... `⌘K`\n\n[Getting Started](https://useworkflow.dev/docs/getting-started)\n\n- [Next.js](https://useworkflow.dev/docs/getting-started/next)\n- [Vite](https://useworkflow.dev/docs/getting-started/vite)\n- [Astro](https://useworkflow.dev/docs/getting-started/astro)\n- [Express](https://useworkflow.dev/docs/getting-started/express)\n- [Fastify](https://useworkflow.dev/docs/getting-started/fastify)\n- [Hono](https://useworkflow.dev/docs/getting-started/hono)\n- [Nitro](https://useworkflow.dev/docs/getting-started/nitro)\n- [Nuxt](https://useworkflow.dev/docs/getting-started/nuxt)\n- [SvelteKit](https://useworkflow.dev/docs/getting-started/sveltekit)\n\n[Foundations](https://useworkflow.dev/docs/foundations)\n\n- [Workflows and Steps](https://useworkflow.dev/docs/foundations/workflows-and-steps)\n- [Starting Workflows](https://useworkflow.dev/docs/foundations/starting-workflows)\n- [Control Flow Patterns](https://useworkflow.dev/docs/foundations/control-flow-patterns)\n- [Errors & Retrying](https://useworkflow.dev/docs/foundations/errors-and-retries)\n- [Hooks & Webhooks](https://useworkflow.dev/docs/foundations/hooks)\n- [Streaming](https://useworkflow.dev/docs/foundations/streaming)\n- [Serialization](https://useworkflow.dev/docs/foundations/serialization)\n- [Idempotency](https://useworkflow.dev/docs/foundations/idempotency)\n\nHow it works\n\n[Observability](https://useworkflow.dev/docs/observability)\n\nAI Agents\n\n- [Building Durable AI Agents](https://useworkflow.dev/docs/ai)\n- [Streaming Updates from Tools](https://useworkflow.dev/docs/ai/streaming-updates-from-tools)\n- [Resumable Streams](https://useworkflow.dev/docs/ai/resumable-streams)\n- [Sleep, Suspense, and Scheduling](https://useworkflow.dev/docs/ai/sleep-and-delays)\n- [Human-in-the-Loop](https://useworkflow.dev/docs/ai/human-in-the-loop)\n- [Patterns for Defining Tools](https://useworkflow.dev/docs/ai/defining-tools)\n- [Chat Session Modeling](https://useworkflow.dev/docs/ai/chat-session-modeling)\n\n[Deploying](https://useworkflow.dev/docs/deploying)\n\n[Errors](https://useworkflow.dev/docs/errors)\n\n[API Reference](https://useworkflow.dev/docs/api-reference)\n\nStreaming Updates from ToolsDefine Your Data Part Type\n\nAI Agents\n\n# Streaming Updates from Tools\n\nAfter [building a durable AI agent](https://useworkflow.dev/docs/ai), we already get UI message chunks for displaying tool invocations and return values. However, for long-running steps, we may want to show progress updates, or stream step output to the user while it's being generated.\n\nWorkflow DevKit enables this by letting step functions write custom chunks to the same stream the agent uses. These chunks appear as data parts in your messages, which you can render however you like.\n\nAs an example, we'll extend out Flight Booking Agent to use emit more granular progress updates while searching for flights.\n\n### [Define Your Data Part Type](https://useworkflow.dev/docs/ai/streaming-updates-from-tools\\#define-your-data-part-type)\n\nFirst, define a TypeScript type for your custom data part. This ensures type safety across your tool and client code:\n\nschemas/chat.ts\n\n```\n\n```\n\nThe `type` field must be a string starting with `data-` followed by your custom identifier. The `id` field should match the `toolCallId` so the client can associate the data with the correct tool invocation. Learn more about [data parts](https://ai-sdk.dev/docs/ai-sdk-ui/streaming-data#data-parts-persistent) in the AI SDK documentation.\n\n### [Emit Updates from Your Tool](https://useworkflow.dev/docs/ai/streaming-updates-from-tools\\#emit-updates-from-your-tool)\n\nUse [`getWritable()`](https://useworkflow.dev/docs/api-reference/workflow/get-writable) inside a step function to get a handle to the stream. This is the same stream that the LLM and other tools calls are writing to, so we can inject out own data packets directly.\n\nworkflows/chat/steps/tools.ts\n\n```\n\n```\n\nKey points:\n\n- Call `getWritable<UIMessageChunk>()` to get the stream\n- Use `getWriter()` to acquire a writer\n- Write objects with `type`, `id`, and `data` fields\n- Always call `releaseLock()` when done writing (learn more about [streaming](https://useworkflow.dev/docs/foundations/streaming))\n\n### [Handle Data Parts in the Client](https://useworkflow.dev/docs/ai/streaming-updates-from-tools\\#handle-data-parts-in-the-client)\n\nUpdate your chat component to detect and render the custom data parts. Data parts are stored in the message's `parts` array alongside text and tool invocation parts:\n\napp/page.tsx\n\n```\n\n```\n\nThe pattern is:\n\n1. Data parts have a `type` field starting with `data-`\n2. Match the type to your custom identifier (e.g., `data-found-flight`)\n3. Use the data part's payload to display progress or intermediate results\n\nNow, when you run the agent to search for flights, you'll see the flight results pop up one after another. This will be most useful if you have tool calls that take minutes to complete, and you need to show granular progress updates to the user.\n\n## [Related Documentation](https://useworkflow.dev/docs/ai/streaming-updates-from-tools\\#related-documentation)\n\n- [Building Durable AI Agents](https://useworkflow.dev/docs/ai) \\- Complete guide to durable agents\n- [`getWritable()` API Reference](https://useworkflow.dev/docs/api-reference/workflow/get-writable) \\- Stream API details\n- [Streaming](https://useworkflow.dev/docs/foundations/streaming) \\- Understanding workflow streams\n\n[Building Durable AI Agents\\\\\n\\\\\nPrevious Page](https://useworkflow.dev/docs/ai) [Resumable Streams\\\\\n\\\\\nNext Page](https://useworkflow.dev/docs/ai/resumable-streams)\n\nOn this page\n\n[Define Your Data Part Type](https://useworkflow.dev/docs/ai/streaming-updates-from-tools#define-your-data-part-type) [Emit Updates from Your Tool](https://useworkflow.dev/docs/ai/streaming-updates-from-tools#emit-updates-from-your-tool) [Handle Data Parts in the Client](https://useworkflow.dev/docs/ai/streaming-updates-from-tools#handle-data-parts-in-the-client) [Related Documentation](https://useworkflow.dev/docs/ai/streaming-updates-from-tools#related-documentation)\n\n[GitHubEdit this page on GitHub](https://github.com/vercel/workflow/edit/main/content/docs/ai/streaming-updates-from-tools.mdx) Scroll to topGive feedbackCopy pageAsk AI about this pageOpen in chat\n\n## Chat\n\nWhat is Workflow?How does retrying work?What control flow patterns are there?How do directives work?How do I build an AI agent?\n\nTip: You can open and close chat with `⌘I`\n\n0 / 1000",
  "metadata": {
    "twitter:image:width": "1200",
    "twitter:image:type": "image/png",
    "twitter:title": "Streaming Updates from Tools",
    "viewport": "width=device-width, initial-scale=1",
    "og:image:type": "image/png",
    "twitter:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "twitter:card": "summary_large_image",
    "og:title": "Streaming Updates from Tools",
    "next-size-adjust": "",
    "twitter:image:height": "628",
    "og:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "og:image:width": "1200",
    "language": "en",
    "ogImage": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "ogTitle": "Streaming Updates from Tools",
    "title": "Streaming Updates from Tools",
    "og:image:height": "628",
    "favicon": "https://useworkflow.dev/favicon.ico?favicon.e7ce0d1c.ico",
    "scrapeId": "019bf2d4-569c-75d7-940f-c31f5a4cfad2",
    "sourceURL": "https://useworkflow.dev/docs/ai/streaming-updates-from-tools",
    "url": "https://useworkflow.dev/docs/ai/streaming-updates-from-tools",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "hit",
    "cachedAt": "2026-01-24T22:01:05.463Z",
    "creditsUsed": 1
  }
}