{
  "markdown": "[Vercel](https://vercel.com/) Slash [Workflow DevKit LogoWorkflow](https://useworkflow.dev/)\n\n- [Docs](https://useworkflow.dev/docs)\n- [Examples](https://github.com/vercel/workflow-examples)\n\n[X](https://x.com/workflowdevkit) [GitHub](https://github.com/vercel/workflow) Search... `⌘K`Ask AI\n\nAsk AI\n\nSearch... `⌘K`\n\n[Getting Started](https://useworkflow.dev/docs/getting-started)\n\n- [Next.js](https://useworkflow.dev/docs/getting-started/next)\n- [Vite](https://useworkflow.dev/docs/getting-started/vite)\n- [Astro](https://useworkflow.dev/docs/getting-started/astro)\n- [Express](https://useworkflow.dev/docs/getting-started/express)\n- [Fastify](https://useworkflow.dev/docs/getting-started/fastify)\n- [Hono](https://useworkflow.dev/docs/getting-started/hono)\n- [Nitro](https://useworkflow.dev/docs/getting-started/nitro)\n- [Nuxt](https://useworkflow.dev/docs/getting-started/nuxt)\n- [SvelteKit](https://useworkflow.dev/docs/getting-started/sveltekit)\n\n[Foundations](https://useworkflow.dev/docs/foundations)\n\n- [Workflows and Steps](https://useworkflow.dev/docs/foundations/workflows-and-steps)\n- [Starting Workflows](https://useworkflow.dev/docs/foundations/starting-workflows)\n- [Control Flow Patterns](https://useworkflow.dev/docs/foundations/control-flow-patterns)\n- [Errors & Retrying](https://useworkflow.dev/docs/foundations/errors-and-retries)\n- [Hooks & Webhooks](https://useworkflow.dev/docs/foundations/hooks)\n- [Streaming](https://useworkflow.dev/docs/foundations/streaming)\n- [Serialization](https://useworkflow.dev/docs/foundations/serialization)\n- [Idempotency](https://useworkflow.dev/docs/foundations/idempotency)\n\nHow it works\n\n[Observability](https://useworkflow.dev/docs/observability)\n\nAI Agents\n\n- [Building Durable AI Agents](https://useworkflow.dev/docs/ai)\n- [Streaming Updates from Tools](https://useworkflow.dev/docs/ai/streaming-updates-from-tools)\n- [Resumable Streams](https://useworkflow.dev/docs/ai/resumable-streams)\n- [Sleep, Suspense, and Scheduling](https://useworkflow.dev/docs/ai/sleep-and-delays)\n- [Human-in-the-Loop](https://useworkflow.dev/docs/ai/human-in-the-loop)\n- [Patterns for Defining Tools](https://useworkflow.dev/docs/ai/defining-tools)\n- [Chat Session Modeling](https://useworkflow.dev/docs/ai/chat-session-modeling)\n\n[Deploying](https://useworkflow.dev/docs/deploying)\n\n[Errors](https://useworkflow.dev/docs/errors)\n\n[API Reference](https://useworkflow.dev/docs/api-reference)\n\nNext.jsCreate Your Next.js Project\n\n[Getting Started](https://useworkflow.dev/docs/getting-started)\n\n# Next.js\n\nThis guide will walk through setting up your first workflow in a Next.js app. Along the way, you'll learn more about the concepts that are fundamental to using the development kit in your own projects.\n\n## [Create Your Next.js Project](https://useworkflow.dev/docs/getting-started/next\\#create-your-nextjs-project)\n\nStart by creating a new Next.js project. This command will create a new directory named `my-workflow-app` and set up a Next.js project inside it.\n\n```\nnpm create next-app@latest my-workflow-app\n```\n\nEnter the newly created directory:\n\n```\ncd my-workflow-app\n```\n\n### [Install `workflow`](https://useworkflow.dev/docs/getting-started/next\\#install-workflow)\n\nnpm\n\npnpm\n\nyarn\n\nbun\n\n```\nnpm i workflow\n```\n\n### [Configure Next.js](https://useworkflow.dev/docs/getting-started/next\\#configure-nextjs)\n\nWrap your `next.config.ts` with `withWorkflow()`. This enables usage of the `\"use workflow\"` and `\"use step\"` directives.\n\nnext.config.ts\n\n```\n\n```\n\n### \\#\\#\\# [Setup IntelliSense for TypeScript (Optional)](https://useworkflow.dev/docs/getting-started/next\\\\#setup-intellisense-for-typescript-optional)\n\n### \\#\\#\\# [Configure Proxy Handler (if applicable)](https://useworkflow.dev/docs/getting-started/next\\\\#configure-proxy-handler-if-applicable)\n\n## [Create Your First Workflow](https://useworkflow.dev/docs/getting-started/next\\#create-your-first-workflow)\n\nCreate a new file for our first workflow:\n\nworkflows/user-signup.ts\n\n```\n\n```\n\nWe'll fill in those functions next, but let's take a look at this code:\n\n- We define a **workflow** function with the directive `\"use workflow\"`. Think of the workflow function as the _orchestrator_ of individual **steps**.\n- The Workflow DevKit's `sleep` function allows us to suspend execution of the workflow without using up any resources. A sleep can be a few seconds, hours, days, or even months long.\n\n## [Create Your Workflow Steps](https://useworkflow.dev/docs/getting-started/next\\#create-your-workflow-steps)\n\nLet's now define those missing functions.\n\nworkflows/user-signup.ts\n\n```\n\n```\n\nTaking a look at this code:\n\n- Business logic lives inside **steps**. When a step is invoked inside a **workflow**, it gets enqueued to run on a separate request while the workflow is suspended, just like `sleep`.\n- If a step throws an error, like in `sendWelcomeEmail`, the step will automatically be retried until it succeeds (or hits the step's max retry count).\n- Steps can throw a `FatalError` if an error is intentional and should not be retried.\n\nWe'll dive deeper into workflows, steps, and other ways to suspend or handle events in [Foundations](https://useworkflow.dev/docs/foundations).\n\n## [Create Your Route Handler](https://useworkflow.dev/docs/getting-started/next\\#create-your-route-handler)\n\nTo invoke your new workflow, we'll need to add your workflow to a `POST` API Route Handler, `app/api/signup/route.ts`, with the following code:\n\napp/api/signup/route.ts\n\n```\n\n```\n\nThis Route Handler creates a `POST` request endpoint at `/api/signup` that will trigger your workflow.\n\nWorkflows can be triggered from API routes, Server Actions, or any server-side code.\n\n## [Run in development](https://useworkflow.dev/docs/getting-started/next\\#run-in-development)\n\nTo start your development server, run the following command in your terminal in the Next.js root directory:\n\n```\nnpm run dev\n```\n\nOnce your development server is running, you can trigger your workflow by running this command in the terminal:\n\n```\ncurl -X POST --json '{\"email\":\"hello@example.com\"}' http://localhost:3000/api/signup\n```\n\nCheck the Next.js development server logs to see your workflow execute, as well as the steps that are being processed.\n\nAdditionally, you can use the [Workflow DevKit CLI or Web UI](https://useworkflow.dev/docs/observability) to inspect your workflow runs and steps in detail.\n\n```\n# Open the observability Web UI\nnpx workflow web\n# or if you prefer a terminal interface, use the CLI inspect command\nnpx workflow inspect runs\n```\n\n![Workflow DevKit Web UI](https://useworkflow.dev/o11y-ui.png)\n\n## [Deploying to production](https://useworkflow.dev/docs/getting-started/next\\#deploying-to-production)\n\nWorkflow DevKit apps currently work best when deployed to [Vercel](https://vercel.com/home) and need no special configuration.\n\nCheck the [Deploying](https://useworkflow.dev/docs/deploying) section to learn how your workflows can be deployed elsewhere.\n\n## [Troubleshooting](https://useworkflow.dev/docs/getting-started/next\\#troubleshooting)\n\n### [Next.js 16.1+ compatibility](https://useworkflow.dev/docs/getting-started/next\\#nextjs-161-compatibility)\n\nIf you see this error when upgrading to Next.js 16.1 or later:\n\n```\nBuild error occurred\nError: Cannot find module 'next/dist/lib/server-external-packages.json'\n```\n\nUpgrade to `workflow@4.0.1-beta.26` or later:\n\nnpm\n\npnpm\n\nyarn\n\nbun\n\n```\nnpm install workflow@latest\n```\n\n## [Next Steps](https://useworkflow.dev/docs/getting-started/next\\#next-steps)\n\n- Learn more about the [Foundations](https://useworkflow.dev/docs/foundations).\n- Check [Errors](https://useworkflow.dev/docs/errors) if you encounter issues.\n- Explore the [API Reference](https://useworkflow.dev/docs/api-reference).\n\n[Getting Started\\\\\n\\\\\nStart by choosing your framework. Each guide will walk you through the steps to install the dependencies and start running your first workflow.](https://useworkflow.dev/docs/getting-started) [Vite\\\\\n\\\\\nNext Page](https://useworkflow.dev/docs/getting-started/vite)\n\nOn this page\n\n[Create Your Next.js Project](https://useworkflow.dev/docs/getting-started/next#create-your-nextjs-project) [Install `workflow`](https://useworkflow.dev/docs/getting-started/next#install-workflow) [Configure Next.js](https://useworkflow.dev/docs/getting-started/next#configure-nextjs) [Setup IntelliSense for TypeScript (Optional)](https://useworkflow.dev/docs/getting-started/next#setup-intellisense-for-typescript-optional) [Configure Proxy Handler (if applicable)](https://useworkflow.dev/docs/getting-started/next#configure-proxy-handler-if-applicable) [Create Your First Workflow](https://useworkflow.dev/docs/getting-started/next#create-your-first-workflow) [Create Your Workflow Steps](https://useworkflow.dev/docs/getting-started/next#create-your-workflow-steps) [Create Your Route Handler](https://useworkflow.dev/docs/getting-started/next#create-your-route-handler) [Run in development](https://useworkflow.dev/docs/getting-started/next#run-in-development) [Deploying to production](https://useworkflow.dev/docs/getting-started/next#deploying-to-production) [Troubleshooting](https://useworkflow.dev/docs/getting-started/next#troubleshooting) [Next.js 16.1+ compatibility](https://useworkflow.dev/docs/getting-started/next#nextjs-161-compatibility) [Next Steps](https://useworkflow.dev/docs/getting-started/next#next-steps)\n\n[GitHubEdit this page on GitHub](https://github.com/vercel/workflow/edit/main/content/docs/getting-started/next.mdx) Scroll to topGive feedbackCopy pageAsk AI about this pageOpen in chat\n\n## Chat\n\nWhat is Workflow?How does retrying work?What control flow patterns are there?How do directives work?How do I build an AI agent?\n\nTip: You can open and close chat with `⌘I`\n\n0 / 1000",
  "metadata": {
    "og:image:type": "image/png",
    "ogTitle": "Next.js",
    "language": "en",
    "next-size-adjust": "",
    "twitter:card": "summary_large_image",
    "ogImage": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "twitter:image:height": "628",
    "ogDescription": "This guide will walk through setting up your first workflow in a Next.js app. Along the way, you'll learn more about the concepts that are fundamental to using the development kit in your own projects.",
    "og:image:height": "628",
    "og:description": "This guide will walk through setting up your first workflow in a Next.js app. Along the way, you'll learn more about the concepts that are fundamental to using the development kit in your own projects.",
    "title": "Next.js",
    "og:title": "Next.js",
    "twitter:title": "Next.js",
    "twitter:image:width": "1200",
    "twitter:description": "This guide will walk through setting up your first workflow in a Next.js app. Along the way, you'll learn more about the concepts that are fundamental to using the development kit in your own projects.",
    "twitter:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "og:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "og:image:width": "1200",
    "viewport": "width=device-width, initial-scale=1",
    "twitter:image:type": "image/png",
    "description": "This guide will walk through setting up your first workflow in a Next.js app. Along the way, you'll learn more about the concepts that are fundamental to using the development kit in your own projects.",
    "favicon": "https://useworkflow.dev/favicon.ico?favicon.e7ce0d1c.ico",
    "scrapeId": "019bf2d4-569c-75d7-940e-fbd20f49d990",
    "sourceURL": "https://useworkflow.dev/docs/getting-started/next",
    "url": "https://useworkflow.dev/docs/getting-started/next",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "hit",
    "cachedAt": "2026-01-24T22:00:51.884Z",
    "creditsUsed": 1
  }
}