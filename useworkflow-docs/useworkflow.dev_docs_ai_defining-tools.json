{
  "markdown": "[Vercel](https://vercel.com/) Slash [Workflow DevKit LogoWorkflow](https://useworkflow.dev/)\n\n- [Docs](https://useworkflow.dev/docs)\n- [Examples](https://github.com/vercel/workflow-examples)\n\n[X](https://x.com/workflowdevkit) [GitHub](https://github.com/vercel/workflow) Search... `⌘K`Ask AI\n\nAsk AI\n\nSearch... `⌘K`\n\n[Getting Started](https://useworkflow.dev/docs/getting-started)\n\n- [Next.js](https://useworkflow.dev/docs/getting-started/next)\n- [Vite](https://useworkflow.dev/docs/getting-started/vite)\n- [Astro](https://useworkflow.dev/docs/getting-started/astro)\n- [Express](https://useworkflow.dev/docs/getting-started/express)\n- [Fastify](https://useworkflow.dev/docs/getting-started/fastify)\n- [Hono](https://useworkflow.dev/docs/getting-started/hono)\n- [Nitro](https://useworkflow.dev/docs/getting-started/nitro)\n- [Nuxt](https://useworkflow.dev/docs/getting-started/nuxt)\n- [SvelteKit](https://useworkflow.dev/docs/getting-started/sveltekit)\n\n[Foundations](https://useworkflow.dev/docs/foundations)\n\n- [Workflows and Steps](https://useworkflow.dev/docs/foundations/workflows-and-steps)\n- [Starting Workflows](https://useworkflow.dev/docs/foundations/starting-workflows)\n- [Control Flow Patterns](https://useworkflow.dev/docs/foundations/control-flow-patterns)\n- [Errors & Retrying](https://useworkflow.dev/docs/foundations/errors-and-retries)\n- [Hooks & Webhooks](https://useworkflow.dev/docs/foundations/hooks)\n- [Streaming](https://useworkflow.dev/docs/foundations/streaming)\n- [Serialization](https://useworkflow.dev/docs/foundations/serialization)\n- [Idempotency](https://useworkflow.dev/docs/foundations/idempotency)\n\nHow it works\n\n[Observability](https://useworkflow.dev/docs/observability)\n\nAI Agents\n\n- [Building Durable AI Agents](https://useworkflow.dev/docs/ai)\n- [Streaming Updates from Tools](https://useworkflow.dev/docs/ai/streaming-updates-from-tools)\n- [Resumable Streams](https://useworkflow.dev/docs/ai/resumable-streams)\n- [Sleep, Suspense, and Scheduling](https://useworkflow.dev/docs/ai/sleep-and-delays)\n- [Human-in-the-Loop](https://useworkflow.dev/docs/ai/human-in-the-loop)\n- [Patterns for Defining Tools](https://useworkflow.dev/docs/ai/defining-tools)\n- [Chat Session Modeling](https://useworkflow.dev/docs/ai/chat-session-modeling)\n\n[Deploying](https://useworkflow.dev/docs/deploying)\n\n[Errors](https://useworkflow.dev/docs/errors)\n\n[API Reference](https://useworkflow.dev/docs/api-reference)\n\nPatterns for Defining ToolsAccessing message context in tools\n\nAI Agents\n\n# Patterns for Defining Tools\n\nThis page covers the details for some common patterns when defining tools for AI agents using Workflow DevKit.\n\nUsing DurableAgent, we model most tools as steps. These can be anything from a simple function call to a entire multi-day long workflow.\n\n## [Accessing message context in tools](https://useworkflow.dev/docs/ai/defining-tools\\#accessing-message-context-in-tools)\n\nJust like in regular AI SDK tool definitions, tool in DurableAgent are called with a first argument of the tool's input parameters, and a second argument of the tool call context.\n\nWhen you tool needs access to the full message history, you can access it via the `messages` property of the tool call context:\n\ntools.ts\n\n```\n\n```\n\n## [Writing to Streams](https://useworkflow.dev/docs/ai/defining-tools\\#writing-to-streams)\n\nAs discussed in [Streaming Updates from Tools](https://useworkflow.dev/docs/ai/streaming-updates-from-tools), it's common to use a step just to call `getWritable()` for writing custom data parts to the stream.\n\nThis can be made generic, by creating a helper step function to write arbitrary data to the stream:\n\ntools.ts\n\n```\n\n```\n\n## [Step-Level vs Workflow-Level Tools](https://useworkflow.dev/docs/ai/defining-tools\\#step-level-vs-workflow-level-tools)\n\nTools can be implemented either at the step level or the workflow level, with different capabilities and constraints.\n\n| Capability | Step-Level (`\"use step\"`) | Workflow-Level (`\"use workflow\"`) |\n| --- | --- | --- |\n| `getWritable()` | ✅ | ❌ |\n| Automatic retries | ✅ | ❌ |\n| Side-effects (e.g. API calls) allowed | ✅ | ❌ |\n| `sleep()` | ❌ | ✅ |\n| `createWebhook()` | ❌ | ✅ |\n\nTools can also combine both by starting out on the workflow level, and calling into steps for I/O operations, like so:\n\ntools.ts\n\n```\n\n```\n\n[Human-in-the-Loop\\\\\n\\\\\nPrevious Page](https://useworkflow.dev/docs/ai/human-in-the-loop) [Chat Session Modeling\\\\\n\\\\\nNext Page](https://useworkflow.dev/docs/ai/chat-session-modeling)\n\nOn this page\n\n[Accessing message context in tools](https://useworkflow.dev/docs/ai/defining-tools#accessing-message-context-in-tools) [Writing to Streams](https://useworkflow.dev/docs/ai/defining-tools#writing-to-streams) [Step-Level vs Workflow-Level Tools](https://useworkflow.dev/docs/ai/defining-tools#step-level-vs-workflow-level-tools)\n\n[GitHubEdit this page on GitHub](https://github.com/vercel/workflow/edit/main/content/docs/ai/defining-tools.mdx) Scroll to topGive feedbackCopy pageAsk AI about this pageOpen in chat\n\n## Chat\n\nWhat is Workflow?How does retrying work?What control flow patterns are there?How do directives work?How do I build an AI agent?\n\nTip: You can open and close chat with `⌘I`\n\n0 / 1000",
  "metadata": {
    "title": "Patterns for Defining Tools",
    "twitter:image:type": "image/png",
    "og:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "twitter:image:height": "628",
    "twitter:title": "Patterns for Defining Tools",
    "twitter:card": "summary_large_image",
    "og:title": "Patterns for Defining Tools",
    "language": "en",
    "og:image:height": "628",
    "og:image:type": "image/png",
    "ogTitle": "Patterns for Defining Tools",
    "twitter:image:width": "1200",
    "og:image:width": "1200",
    "twitter:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "ogImage": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "viewport": "width=device-width, initial-scale=1",
    "next-size-adjust": "",
    "favicon": "https://useworkflow.dev/favicon.ico?favicon.e7ce0d1c.ico",
    "scrapeId": "019bf2d4-569c-75d7-940f-3dd604d87c24",
    "sourceURL": "https://useworkflow.dev/docs/ai/defining-tools",
    "url": "https://useworkflow.dev/docs/ai/defining-tools",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "hit",
    "cachedAt": "2026-01-24T22:00:52.129Z",
    "creditsUsed": 1
  }
}