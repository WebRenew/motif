{
  "markdown": "[Vercel](https://vercel.com/) Slash [Workflow DevKit LogoWorkflow](https://useworkflow.dev/)\n\n- [Docs](https://useworkflow.dev/docs)\n- [Examples](https://github.com/vercel/workflow-examples)\n\n[X](https://x.com/workflowdevkit) [GitHub](https://github.com/vercel/workflow) Search... `⌘K`Ask AI\n\nAsk AI\n\nSearch... `⌘K`\n\n[Getting Started](https://useworkflow.dev/docs/getting-started)\n\n- [Next.js](https://useworkflow.dev/docs/getting-started/next)\n- [Vite](https://useworkflow.dev/docs/getting-started/vite)\n- [Astro](https://useworkflow.dev/docs/getting-started/astro)\n- [Express](https://useworkflow.dev/docs/getting-started/express)\n- [Fastify](https://useworkflow.dev/docs/getting-started/fastify)\n- [Hono](https://useworkflow.dev/docs/getting-started/hono)\n- [Nitro](https://useworkflow.dev/docs/getting-started/nitro)\n- [Nuxt](https://useworkflow.dev/docs/getting-started/nuxt)\n- [SvelteKit](https://useworkflow.dev/docs/getting-started/sveltekit)\n\n[Foundations](https://useworkflow.dev/docs/foundations)\n\n- [Workflows and Steps](https://useworkflow.dev/docs/foundations/workflows-and-steps)\n- [Starting Workflows](https://useworkflow.dev/docs/foundations/starting-workflows)\n- [Control Flow Patterns](https://useworkflow.dev/docs/foundations/control-flow-patterns)\n- [Errors & Retrying](https://useworkflow.dev/docs/foundations/errors-and-retries)\n- [Hooks & Webhooks](https://useworkflow.dev/docs/foundations/hooks)\n- [Streaming](https://useworkflow.dev/docs/foundations/streaming)\n- [Serialization](https://useworkflow.dev/docs/foundations/serialization)\n- [Idempotency](https://useworkflow.dev/docs/foundations/idempotency)\n\nHow it works\n\n[Observability](https://useworkflow.dev/docs/observability)\n\nAI Agents\n\n- [Building Durable AI Agents](https://useworkflow.dev/docs/ai)\n- [Streaming Updates from Tools](https://useworkflow.dev/docs/ai/streaming-updates-from-tools)\n- [Resumable Streams](https://useworkflow.dev/docs/ai/resumable-streams)\n- [Sleep, Suspense, and Scheduling](https://useworkflow.dev/docs/ai/sleep-and-delays)\n- [Human-in-the-Loop](https://useworkflow.dev/docs/ai/human-in-the-loop)\n- [Patterns for Defining Tools](https://useworkflow.dev/docs/ai/defining-tools)\n- [Chat Session Modeling](https://useworkflow.dev/docs/ai/chat-session-modeling)\n\n[Deploying](https://useworkflow.dev/docs/deploying)\n\n[Errors](https://useworkflow.dev/docs/errors)\n\n[API Reference](https://useworkflow.dev/docs/api-reference)\n\ndefineHookAPI Signature\n\n[API Reference](https://useworkflow.dev/docs/api-reference) [workflow](https://useworkflow.dev/docs/api-reference/workflow)\n\n# defineHook\n\nCreates a type-safe hook helper that ensures the payload type is consistent between hook creation and resumption.\n\nThis is a lightweight wrapper around [`createHook()`](https://useworkflow.dev/docs/api-reference/workflow/create-hook) and [`resumeHook()`](https://useworkflow.dev/docs/api-reference/workflow-api/resume-hook) to avoid type mismatches. It also supports optional runtime validation and transformation of payloads using any [Standard Schema v1](https://standardschema.dev/) compliant validator like Zod or Valibot.\n\nWe recommend using `defineHook()` over `createHook()` in production codebases for better type safety and optional runtime validation.\n\n```\nimport { defineHook } from \"workflow\";\n\nconst nameHook = defineHook<{\n  name: string;\n}>();\n\nexport async function nameWorkflow() {\n  \"use workflow\";\n\n  const hook = nameHook.create();\n  const result = await hook; // Fully typed as { name: string }\n  console.log(\"Name:\", result.name);\n}\n```\n\n## [API Signature](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#api-signature)\n\n### [Parameters](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#parameters)\n\n| Name | Type | Description |\n| --- | --- | --- |\n| `__0` | { schema?: StandardSchemaV1<TInput, TOutput>; } | Schema used to validate and transform the input payload before resuming |\n\n### [Returns](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#returns)\n\n| Name | Type | Description |\n| --- | --- | --- |\n| `create` | (options?: any) => Hook<T> | Creates a new hook with the defined payload type. |\n| `resume` | (token: string, payload: T) => Promise<any> | Resumes a hook by sending a payload with the defined type. |\n\n## [Examples](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#examples)\n\n### [Basic Type-Safe Hook Definition](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#basic-type-safe-hook-definition)\n\nBy defining the hook once with a specific payload type, you can reuse it in multiple workflows and API routes with automatic type safety.\n\n```\nimport { defineHook } from \"workflow\";\n\n// Define once with a specific payload type\nconst approvalHook = defineHook<{\n  approved: boolean;\n  comment: string;\n}>();\n\n// In your workflow\nexport async function workflowWithApproval() {\n  \"use workflow\";\n\n  const hook = approvalHook.create();\n  const result = await hook; // Fully typed as { approved: boolean; comment: string }\n\n  console.log(\"Approved:\", result.approved);\n  console.log(\"Comment:\", result.comment);\n}\n```\n\n### [Resuming with Type Safety](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#resuming-with-type-safety)\n\nHooks can be resumed using the same defined hook and a token. By using the same hook, you can ensure that the payload matches the defined type when resuming a hook.\n\n```\n// Use the same defined hook to resume\nexport async function POST(request: Request) {\n  const { token, approved, comment } = await request.json();\n\n  // Type-safe resumption - TypeScript ensures the payload matches\n  const result = await approvalHook.resume(token, {\n    approved,\n    comment,\n  });\n\n  if (!result) {\n    return Response.json({ error: \"Hook not found\" }, { status: 404 });\n  }\n\n  return Response.json({ success: true, runId: result.runId });\n}\n```\n\n### [Validate and Transform with Schema](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#validate-and-transform-with-schema)\n\nYou can provide runtime validation and transformation of hook payloads using the `schema` option. This option accepts any validator that conforms to the [Standard Schema v1](https://standardschema.dev/) specification.\n\nStandard Schema is a standardized specification for schema validation libraries. Most popular validation libraries support it, including Zod, Valibot, ArkType, and Effect Schema. You can also write custom validators.\n\n#### [Using Zod with defineHook](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#using-zod-with-definehook)\n\nHere's an example using [Zod](https://zod.dev/) to validate and transform hook payloads:\n\n```\nimport { defineHook } from \"workflow\";\nimport { z } from \"zod\";\n\nexport const approvalHook = defineHook({\n  schema: z.object({\n    approved: z.boolean(),\n    comment: z.string().min(1).transform((value) => value.trim()),\n  }),\n});\n\nexport async function approvalWorkflow(approvalId: string) {\n  \"use workflow\";\n\n  const hook = approvalHook.create({\n    token: `approval:${approvalId}`,\n  });\n\n  // Payload is automatically typed based on the schema\n  const { approved, comment } = await hook;\n  console.log(\"Approved:\", approved);\n  console.log(\"Comment (trimmed):\", comment);\n}\n```\n\nWhen resuming the hook from an API route, the schema validates and transforms the incoming payload before the workflow resumes:\n\n```\nexport async function POST(request: Request) {\n  // Incoming payload: { token: \"...\", approved: true, comment: \"   Ready!   \" }\n  const { token, approved, comment } = await request.json();\n\n  // The schema validates and transforms the payload:\n  // - Checks that `approved` is a boolean\n  // - Checks that `comment` is a non-empty string\n  // - Trims whitespace from the comment\n  // If validation fails, an error is thrown and the hook is not resumed\n  await approvalHook.resume(token, {\n    approved,\n    comment, // Automatically trimmed to \"Ready!\"\n  });\n\n  return Response.json({ success: true });\n}\n```\n\n#### [Using Other Standard Schema Libraries](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#using-other-standard-schema-libraries)\n\nThe same pattern works with any Standard Schema v1 compliant library. Here's an example with [Valibot](https://valibot.dev/):\n\n```\nimport { defineHook } from \"workflow\";\nimport * as v from \"valibot\";\n\nexport const approvalHook = defineHook({\n  schema: v.object({\n    approved: v.boolean(),\n    comment: v.pipe(v.string(), v.minLength(1), v.trim()),\n  }),\n});\n```\n\n### [Customizing Tokens](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#customizing-tokens)\n\nTokens are used to identify a specific hook and for resuming a hook. You can customize the token to be more specific to a use case.\n\n```\nconst slackHook = defineHook<{ text: string; userId: string }>();\n\nexport async function slackBotWorkflow(channelId: string) {\n  \"use workflow\";\n\n  const hook = slackHook.create({\n    token: `slack:${channelId}`,\n  });\n\n  const message = await hook;\n  console.log(`Message from ${message.userId}: ${message.text}`);\n}\n```\n\n## [Related Functions](https://useworkflow.dev/docs/api-reference/workflow/define-hook\\#related-functions)\n\n- [`createHook()`](https://useworkflow.dev/docs/api-reference/workflow/create-hook) \\- Create a hook in a workflow.\n- [`resumeHook()`](https://useworkflow.dev/docs/api-reference/workflow-api/resume-hook) \\- Resume a hook with a payload.\n\n[createWebhook\\\\\n\\\\\nPrevious Page](https://useworkflow.dev/docs/api-reference/workflow/create-webhook) [fetch\\\\\n\\\\\nNext Page](https://useworkflow.dev/docs/api-reference/workflow/fetch)\n\nOn this page\n\n[API Signature](https://useworkflow.dev/docs/api-reference/workflow/define-hook#api-signature) [Parameters](https://useworkflow.dev/docs/api-reference/workflow/define-hook#parameters) [Returns](https://useworkflow.dev/docs/api-reference/workflow/define-hook#returns) [Examples](https://useworkflow.dev/docs/api-reference/workflow/define-hook#examples) [Basic Type-Safe Hook Definition](https://useworkflow.dev/docs/api-reference/workflow/define-hook#basic-type-safe-hook-definition) [Resuming with Type Safety](https://useworkflow.dev/docs/api-reference/workflow/define-hook#resuming-with-type-safety) [Validate and Transform with Schema](https://useworkflow.dev/docs/api-reference/workflow/define-hook#validate-and-transform-with-schema) [Using Zod with defineHook](https://useworkflow.dev/docs/api-reference/workflow/define-hook#using-zod-with-definehook) [Using Other Standard Schema Libraries](https://useworkflow.dev/docs/api-reference/workflow/define-hook#using-other-standard-schema-libraries) [Customizing Tokens](https://useworkflow.dev/docs/api-reference/workflow/define-hook#customizing-tokens) [Related Functions](https://useworkflow.dev/docs/api-reference/workflow/define-hook#related-functions)\n\n[GitHubEdit this page on GitHub](https://github.com/vercel/workflow/edit/main/content/docs/api-reference/workflow/define-hook.mdx) Scroll to topGive feedbackCopy pageAsk AI about this pageOpen in chat\n\n## Chat\n\nWhat is Workflow?How does retrying work?What control flow patterns are there?How do directives work?How do I build an AI agent?\n\nTip: You can open and close chat with `⌘I`\n\n0 / 1000",
  "metadata": {
    "viewport": "width=device-width, initial-scale=1",
    "twitter:image:width": "1200",
    "next-size-adjust": "",
    "title": "defineHook",
    "twitter:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "og:image:width": "1200",
    "twitter:title": "defineHook",
    "ogImage": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "twitter:card": "summary_large_image",
    "language": "en",
    "og:title": "defineHook",
    "twitter:image:type": "image/png",
    "og:image:type": "image/png",
    "og:image": "https://useworkflow.dev/opengraph-image.png?opengraph-image.f38670ff.png",
    "og:image:height": "628",
    "twitter:image:height": "628",
    "ogTitle": "defineHook",
    "favicon": "https://useworkflow.dev/favicon.ico?favicon.e7ce0d1c.ico",
    "scrapeId": "019bf2d4-569c-75d7-940f-82028097da00",
    "sourceURL": "https://useworkflow.dev/docs/api-reference/workflow/define-hook",
    "url": "https://useworkflow.dev/docs/api-reference/workflow/define-hook",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "hit",
    "cachedAt": "2026-01-24T22:01:13.133Z",
    "creditsUsed": 1
  }
}